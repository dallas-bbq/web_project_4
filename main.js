(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const t=function(){function t(e,n,r,o,i,a,u,c,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._data=e,this._id=n,this._likes=r,this._cardOwned=o,this._likedByOwner=i,this._cardTemplateSelector=a,this._handleCardClick=u,this._handleLikeClick=c,this._handleDeleteClick=s}var n,r;return n=t,(r=[{key:"createCardElement",value:function(){this._cardElement=this._getCardTemplate(),this._cardElement.querySelector(".card__delete").style.display=this._cardOwned?"block":"none";var e=this._cardElement.querySelector(".card__like");this._likedByOwner&&e.classList.add("card__like_act");var t=this._cardElement.querySelector(".card__image");return this._cardElement.querySelector(".card__text").textContent=this._data.name,t.style.backgroundImage="url(".concat(this._data.link,")"),t.alt=this._data.name,this._cardElement.querySelector(".card__like-count").textContent=this._likes.length,this._setEventListeners(),this._cardElement}},{key:"setLikes",value:function(e){this._likes=e,this._cardElement.querySelector(".card__like-count").textContent=this._likes.length}},{key:"_getCardTemplate",value:function(){return document.querySelector(this._cardTemplateSelector).content.querySelector(".places__item").cloneNode(!0)}},{key:"likeButtonToggle",value:function(){this._cardElement.querySelector(".card__like").classList.toggle("card__like_act")}},{key:"deleteCard",value:function(){this._cardElement.remove()}},{key:"_setEventListeners",value:function(){var e=this,t=this._cardElement.querySelector(".card__like"),n=this._cardElement.querySelector(".card__delete"),r=this._cardElement.querySelector(".card__image");t.addEventListener("click",(function(){return e._handleLikeClick()})),n.addEventListener("click",(function(){return e._handleDeleteClick()})),r.addEventListener("click",(function(){return e._handleCardClick(e._data.name,e._data.link)}))}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._formElement=n}var t,r;return t=e,(r=[{key:"_showError",value:function(e,t){var n=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),n.classList.add(this._config.errorClass),n.textContent=t}},{key:"_hideError",value:function(e){var t=this._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._config.inputErrorClass),t.textContent="",t.classList.remove(this._config.errorClass)}},{key:"_toggleButton",value:function(e,t){t.every((function(e){return e.validity.valid}))?(this._submitButton.disabled=!1,this._submitButton.classList.remove(this._config.inactiveButtonClass)):(this._submitButton.disabled=!0,this._submitButton.classList.add(this._config.inactiveButtonClass))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideError(e):this._showError(e,e.validationMessage)}},{key:"_setEventListeners",value:function(){var e=this;this._submitButton=this._formElement.querySelector(this._config.submitButtonSelector),this._formInputList=Array.from(this._formElement.querySelectorAll(this._config.inputSelector)),this._formInputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButton(e._submitButton,e._formInputList)}))}))}},{key:"resetValidation",value:function(){var e=this;this._formInputList.forEach((function(t){e._hideError(t)})),this._toggleButton(this._submitButton,this._formInputList)}},{key:"enableValidation",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()})),this._setEventListeners()}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const i=function(){function e(t,n){var r=t.data,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initialArray=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._initialArray.forEach((function(t){e._renderer(t)}))}},{key:"setItem",value:function(e){this._container.prepend(e)}}])&&o(t.prototype,n),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const u=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._defaultButtonText=n,this._handleEscClose=this._handleEscClose.bind(this),this._submitButton=this._popup.querySelector(".popup__submit"),this.setEventListeners()}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_is_open"),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){document.removeEventListener("keyup",this._handleEscClose),this._popup.classList.remove("popup_is_open")}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_handleOverlayClose",value:function(e){e.target.classList.contains("popup")&&this.close()}},{key:"setLoadingButton",value:function(){this._submitButton.textContent="Saving..."}},{key:"setDefaultButton",value:function(){this._submitButton.textContent=this._defaultButtonText}},{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".popup__close").addEventListener("click",(function(){e.close()})),this._popup.addEventListener("click",(function(t){e._handleOverlayClose(t)}))}}])&&a(t.prototype,n),e}();function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e)}return t=a,(n=[{key:"open",value:function(e,t){this._popup.querySelector(".popup__image").src=t,this._popup.querySelector(".popup__caption").textContent=e,l(h(a.prototype),"open",this).call(this)}}])&&s(t.prototype,n),a}(u);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(r);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function a(e){var t,n=e.popupSelector,r=e.defaultButtonText,o=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n,r))._handleFormSubmit=o,t._inputList=t._popup.querySelectorAll(".popup__input"),t}return t=a,(n=[{key:"close",value:function(){this._form.reset(),m(k(a.prototype),"close",this).call(this)}},{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;this._form=this._popup.querySelector(".popup__form"),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())})),m(k(a.prototype),"setEventListeners",this).call(this)}}])&&_(t.prototype,n),a}(u);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=L(r);if(o){var n=L(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return C(this,e)});function a(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.call(this,e,t)}return t=a,(n=[{key:"handleConfirmClick",value:function(e){this._confirm=e}},{key:"setEventListeners",value:function(){var e=this;w(L(a.prototype),"setEventListeners",this).call(this),this._popup.addEventListener("submit",(function(t){t.preventDefault(),e._confirm()}))}}])&&S(t.prototype,n),a}(u);function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const P=function(){function e(t){var n=t.userNameSelector,r=t.userJobSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=document.querySelector(n),this._userJob=document.querySelector(r),this._avatarSelector=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._userName.textContent,job:this._userJob.textContent,id:this._id}}},{key:"setUserInfo",value:function(e){this._userName.textContent=e.name,this._userJob.textContent=e.about,this._avatarSelector.style.backgroundImage="url(".concat(e.avatar,")"),this._id=e._id}}])&&B(t.prototype,n),e}();function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const T=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=n,this.headers=r}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return fetch(this.baseUrl+"/users/me",{method:"GET",headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;return fetch(this.baseUrl+"/users/me",{method:"PATCH",headers:this.headers,body:JSON.stringify({name:t,about:n})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"getCardsList",value:function(){return fetch(this.baseUrl+"/cards",{method:"GET",headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"addCard",value:function(e){var t=e.name,n=e.link;return fetch(this.baseUrl+"/cards",{method:"POST",headers:this.headers,body:JSON.stringify({name:t,link:n})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"removeCard",value:function(e){return fetch(this.baseUrl+"/cards/"+"".concat(e),{method:"DELETE",headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"addLike",value:function(e){return fetch(this.baseUrl+"/cards/likes/"+e,{method:"PUT",headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"deleteLike",value:function(e){return fetch(this.baseUrl+"/cards/likes/"+e,{method:"DELETE",headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}},{key:"setUserPic",value:function(e){var t=e.avatar;return fetch(this.baseUrl+"/users/me/avatar",{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:t})}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}))}}])&&q(t.prototype,n),e}();var I={inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},R=document.querySelector(".profile__edit"),x=document.querySelector(".profile__add"),U=document.querySelector(".popup__container_type-profile"),D=document.querySelector(".popup_add-card"),V=document.querySelector(".popup_edit-avatar"),A=(document.querySelector(".popup__image"),document.querySelector(".popup__caption"),document.querySelector(".popup__input_type-name")),N=document.querySelector(".popup__input_type-about-me"),J=(document.querySelector(".card__like"),document.querySelector(".profile__avatar-edit"));function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var G=new T({baseUrl:"https://around.nomoreparties.co/v1/group-10",headers:{authorization:"64475879-5827-45ba-be3f-04a139568764","Content-Type":"application/json"}}),H=new r(I,U),M=new r(I,D),z=new r(I,V),Y=new P({userNameSelector:".profile__name",userJobSelector:".profile__title",avatarSelector:".profile__avatar"}),$=new d(".popup_image-preview"),K=new j(".popup_confirm","Yes");H.enableValidation(),M.enableValidation(),z.enableValidation(),Promise.all([G.getUserInfo(),G.getCardsList()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}}(t,n)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],a=r[1];Y.setUserInfo(o);var u=new i({data:a,renderer:function(e){var t=Z(e);u.setItem(t)}},".places__list");u.renderItems();var c=new g({popupSelector:".popup_add-card",defaultButtonText:"Create",handleFormSubmit:function(e){c.setLoadingButton(),G.addCard(e).then((function(e){var t=Z(e);u.setItem(t),c.close()})).catch((function(e){console.log(e)}))}});x.addEventListener("click",(function(){c.open(),c.setDefaultButton(),M.resetValidation()}))}));var Q=new g({popupSelector:".popup_profile",defaultButtonText:"Save",handleFormSubmit:function(e){Q.setLoadingButton(),G.setUserInfo({name:e["user-name"],about:e["user-about"]}).then((function(e){Y.setUserInfo(e),Q.close()})).catch((function(e){console.log(e)}))}}),W=new g({popupSelector:".popup_edit-avatar",defaultButtonText:"Save",handleFormSubmit:function(e){W.setLoadingButton(),G.setUserPic({avatar:e["avatar-link"]}).then((function(e){Y.setUserInfo(e),W.close()})).catch((function(e){console.log(e)}))}}),X=function(e,t){$.open(e,t)},Z=function(e){var n=new t(e,e._id,e.likes,e.owner._id===Y._id,e.likes.some((function(e){return e._id===Y._id})),"#card-template",X,(function(){n._likedByOwner?(G.deleteLike(e._id).then((function(e){n.setLikes(e.likes),n.likeButtonToggle()})).catch((function(e){console.log(e)})),n._likedByOwner=!1):(G.addLike(e._id).then((function(e){n.setLikes(e.likes),n.likeButtonToggle()})).catch((function(e){console.log(e)})),n._likedByOwner=!0)}),(function(){K.setDefaultButton(),K.open(),K.handleConfirmClick((function(){K.setLoadingButton(),G.removeCard(e._id).then((function(e){return n.deleteCard()})).catch((function(e){console.log(e)})),K.close()}))}));return n.createCardElement()};R.addEventListener("click",(function(){var e=Y.getUserInfo(),t=e.name,n=e.job;A.value=t,N.value=n,Q.open(),Q.setDefaultButton(),H.resetValidation()})),J.addEventListener("click",(function(){W.setDefaultButton(),z.resetValidation(),W.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly95YW5kZXgucHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3lhbmRleC5wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybS5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJhY3RpY3VtLy4vc3JjL3BhZ2UvaW5kZXguanMiXSwibmFtZXMiOlsiZGF0YSIsImlkIiwibGlrZXMiLCJjYXJkT3duZWQiLCJsaWtlZEJ5T3duZXIiLCJjYXJkVGVtcGxhdGVTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUxpa2VDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwidGhpcyIsIl9kYXRhIiwiX2lkIiwiX2xpa2VzIiwiX2NhcmRPd25lZCIsIl9saWtlZEJ5T3duZXIiLCJfY2FyZFRlbXBsYXRlU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9jYXJkRWxlbWVudCIsIl9nZXRDYXJkVGVtcGxhdGUiLCJxdWVyeVNlbGVjdG9yIiwic3R5bGUiLCJkaXNwbGF5IiwibGlrZUJ1dHRvbiIsImNsYXNzTGlzdCIsImFkZCIsImNhcmRJbWFnZSIsInRleHRDb250ZW50IiwibmFtZSIsImJhY2tncm91bmRJbWFnZSIsImxpbmsiLCJhbHQiLCJsZW5ndGgiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJ0b2dnbGUiLCJyZW1vdmUiLCJkZWxldGVCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfY29uZmlnIiwiX2Zvcm1FbGVtZW50IiwiaW5wdXQiLCJpbnB1dFZhbGlkYXRpb25NZXNzYWdlIiwiZm9ybUVycm9yIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInN1Ym1pdEJ1dHRvbiIsImZvcm1JbnB1dExpc3QiLCJldmVyeSIsInZhbGlkaXR5IiwidmFsaWQiLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2hpZGVFcnJvciIsIl9zaG93RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2Zvcm1JbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsIl9pbml0aWFsQXJyYXkiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwicG9wdXBTZWxlY3RvciIsImRlZmF1bHRCdXR0b25UZXh0IiwiX3BvcHVwIiwiX2RlZmF1bHRCdXR0b25UZXh0IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsInNldEV2ZW50TGlzdGVuZXJzIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJfaGFuZGxlT3ZlcmxheUNsb3NlIiwic3JjIiwiUG9wdXAiLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRMaXN0IiwiX2Zvcm0iLCJyZXNldCIsIl9mb3JtVmFsdWVzIiwidmFsdWUiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJjb25maXJtIiwiX2NvbmZpcm0iLCJ1c2VyTmFtZVNlbGVjdG9yIiwidXNlckpvYlNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfdXNlck5hbWUiLCJfdXNlckpvYiIsIl9hdmF0YXJTZWxlY3RvciIsImpvYiIsIm5ld1VzZXIiLCJhYm91dCIsImF2YXRhciIsImJhc2VVcmwiLCJoZWFkZXJzIiwiZmV0Y2giLCJtZXRob2QiLCJ0aGVuIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2FyZElEIiwib3BlblByb2ZpbGVNb2RhbCIsIm9wZW5DYXJkTW9kYWwiLCJwcm9maWxlRm9ybSIsImNhcmRGb3JtIiwiYXZhdGFyRm9ybSIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwiYXZhdGFyRWRpdEJ1dHRvbiIsImFwaSIsIkFwaSIsImF1dGhvcml6YXRpb24iLCJlZGl0UHJvZmlsZVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0aW9uIiwiYWRkQ2FyZFZhbGlkYXRvciIsImVkaXRBdmF0YXJWYWxpZGF0b3IiLCJ1c2VySW5mbyIsIlVzZXJJbmZvIiwiaW1hZ2VQcmV2aWV3IiwiUG9wdXBXaXRoSW1hZ2UiLCJjb25maXJtRGVsZXRlUG9wdXAiLCJQb3B1cFdpdGhDb25maXJtIiwiZW5hYmxlVmFsaWRhdGlvbiIsImFsbCIsImdldFVzZXJJbmZvIiwiZ2V0Q2FyZHNMaXN0IiwidXNlciIsImNhcmRzIiwic2V0VXNlckluZm8iLCJjYXJkc0xpc3QiLCJTZWN0aW9uIiwiY2FyZEVsZW1lbnQiLCJjcmVhdGVDYXJkIiwic2V0SXRlbSIsInJlbmRlckl0ZW1zIiwiYWRkQ2FyZFBvcHVwIiwiUG9wdXBXaXRoRm9ybSIsInNldExvYWRpbmdCdXR0b24iLCJhZGRDYXJkIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwib3BlbiIsInNldERlZmF1bHRCdXR0b24iLCJyZXNldFZhbGlkYXRpb24iLCJlZGl0UHJvZmlsZVBvcHVwIiwiaW5mbyIsImVkaXRBdmF0YXIiLCJzZXRVc2VyUGljIiwiY2FyZCIsIkNhcmQiLCJvd25lciIsInNvbWUiLCJkZWxldGVMaWtlIiwic2V0TGlrZXMiLCJsaWtlQnV0dG9uVG9nZ2xlIiwiYWRkTGlrZSIsImhhbmRsZUNvbmZpcm1DbGljayIsInJlbW92ZUNhcmQiLCJkZWxldGVDYXJkIiwiY3JlYXRlQ2FyZEVsZW1lbnQiXSwibWFwcGluZ3MiOiJ5TEFnRkEsUSxXQS9FSSxXQUFZQSxFQUFNQyxFQUFJQyxFQUFPQyxFQUFXQyxFQUFjQyxFQUFzQkMsRUFBaUJDLEVBQWlCQyxJLDRGQUFtQixTQUM3SEMsS0FBS0MsTUFBUVYsRUFDYlMsS0FBS0UsSUFBTVYsRUFDWFEsS0FBS0csT0FBU1YsRUFDZE8sS0FBS0ksV0FBYVYsRUFDbEJNLEtBQUtLLGNBQWdCVixFQUNyQkssS0FBS00sc0JBQXdCVixFQUM3QkksS0FBS08saUJBQW1CVixFQUN4QkcsS0FBS1EsaUJBQW1CVixFQUN4QkUsS0FBS1MsbUJBQXFCVixFLHNEQUk5QixXQUNJQyxLQUFLVSxhQUFlVixLQUFLVyxtQkFFSlgsS0FBS1UsYUFBYUUsY0FBYyxpQkFDeENDLE1BQU1DLFFBQVVkLEtBQUtJLFdBQWEsUUFBVSxPQUV6RCxJQUFNVyxFQUFhZixLQUFLVSxhQUFhRSxjQUFjLGVBQy9DWixLQUFLSyxlQUNMVSxFQUFXQyxVQUFVQyxJQUFJLGtCQUc3QixJQUFNQyxFQUFZ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QUFtQndCLG1CQUNuQnhCLEVBQW1CdUIsT0FDbkJ2QixFQUFtQnNDLG9CQUFtQixXQUNsQ3RDLEVBQW1CaUIsbUJBQ25CNUIsRUFBSWtELFdBQVc3TCxFQUFLVyxLQUNmNkcsTUFBSyxTQUFBQyxHQUFHLE9BQUkyRCxFQUFLVSxnQkFDakJyQixPQUFNLFNBQUNDLEdBQ0pDLFFBQVFDLElBQUlGLE1BR3BCcEIsRUFBbUI1RCxjQU0vQixPQURpQjBGLEVBQUtXLHFCQU0xQjVELEVBQWlCMUYsaUJBQWlCLFNBQVMsV0FBTSxNQUN2QnlHLEVBQVNRLGNBQXZCN0gsRUFEcUMsRUFDckNBLEtBQU1tRixFQUQrQixFQUMvQkEsSUFDZHdCLFFBQWtCM0csRUFDbEI0RyxRQUFpQnpCLEVBQ2pCZ0UsRUFBaUJILE9BQ2pCRyxFQUFpQkYsbUJBQ2pCaEMsRUFBcUJpQyxxQkFHekJyQyxFQUFpQmpHLGlCQUFpQixTQUFTLFdBQ3ZDeUksRUFBV0osbUJBQ1g3QixFQUFvQjhCLGtCQUNwQkcsRUFBV0wsVyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQ2FyZCB7XG4gICAgY29uc3RydWN0b3IoZGF0YSwgaWQsIGxpa2VzLCBjYXJkT3duZWQsIGxpa2VkQnlPd25lciwgY2FyZFRlbXBsYXRlU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlTGlrZUNsaWNrLCBoYW5kbGVEZWxldGVDbGljaykge1xuICAgICAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICAgICAgdGhpcy5faWQgPSBpZDtcbiAgICAgICAgdGhpcy5fbGlrZXMgPSBsaWtlcztcbiAgICAgICAgdGhpcy5fY2FyZE93bmVkID0gY2FyZE93bmVkO1xuICAgICAgICB0aGlzLl9saWtlZEJ5T3duZXIgPSBsaWtlZEJ5T3duZXI7XG4gICAgICAgIHRoaXMuX2NhcmRUZW1wbGF0ZVNlbGVjdG9yID0gY2FyZFRlbXBsYXRlU2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xuICAgIH1cblxuXG4gICAgY3JlYXRlQ2FyZEVsZW1lbnQoKSB7XG4gICAgICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0Q2FyZFRlbXBsYXRlKCk7XG5cbiAgICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2RlbGV0ZScpO1xuICAgICAgICBkZWxldGVCdXR0b24uc3R5bGUuZGlzcGxheSA9IHRoaXMuX2NhcmRPd25lZCA/IFwiYmxvY2tcIiA6IFwibm9uZVwiO1xuXG4gICAgICAgIGNvbnN0IGxpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZScpO1xuICAgICAgICBpZiAodGhpcy5fbGlrZWRCeU93bmVyKSB7XG4gICAgICAgICAgICBsaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2NhcmRfX2xpa2VfYWN0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcbiAgICAgICAgY29uc3QgY2FyZFRpdGxlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX3RleHQnKTtcblxuICAgICAgICBjYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl9kYXRhLm5hbWU7XG4gICAgICAgIGNhcmRJbWFnZS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7dGhpcy5fZGF0YS5saW5rfSlgO1xuICAgICAgICBjYXJkSW1hZ2UuYWx0ID0gdGhpcy5fZGF0YS5uYW1lO1xuXG4gICAgICAgIGNvbnN0IGxpa2VDb3VudCA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWNvdW50Jyk7XG4gICAgICAgIGxpa2VDb3VudC50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcblxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgICB9XG5cbiAgICBzZXRMaWtlcyhsaWtlcykge1xuICAgICAgICB0aGlzLl9saWtlcyA9IGxpa2VzO1xuICAgICAgICBjb25zdCBsaWtlQ291bnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZS1jb3VudCcpO1xuICAgICAgICBsaWtlQ291bnQudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XG4gICAgfVxuXG4gICAgX2dldENhcmRUZW1wbGF0ZSgpIHtcbiAgICAgICAgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRUZW1wbGF0ZVNlbGVjdG9yKVxuICAgICAgICAgICAgLmNvbnRlbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcucGxhY2VzX19pdGVtJylcbiAgICAgICAgICAgIC5jbG9uZU5vZGUodHJ1ZSlcblxuICAgICAgICByZXR1cm4gY2FyZFRlbXBsYXRlO1xuICAgIH1cblxuICAgIGxpa2VCdXR0b25Ub2dnbGUoKSB7XG4gICAgICAgIGNvbnN0IGxpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZScpO1xuICAgICAgICBsaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2NhcmRfX2xpa2VfYWN0Jyk7XG4gICAgfVxuXG4gICAgZGVsZXRlQ2FyZCgpIHtcbiAgICAgICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UnKTtcbiAgICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2RlbGV0ZScpO1xuICAgICAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcblxuICAgICAgICBsaWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlTGlrZUNsaWNrKCkpO1xuXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKCkpO1xuXG4gICAgICAgIGNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9kYXRhLm5hbWUsIHRoaXMuX2RhdGEubGluaykpO1xuICAgIH1cblxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IENhcmQiLCJjbGFzcyBGb3JtVmFsaWRhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWdcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudFxuICAgIH1cblxuICAgIF9zaG93RXJyb3IoaW5wdXQsIGlucHV0VmFsaWRhdGlvbk1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZm9ybUVycm9yID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYCk7XG4gICAgICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgICAgIGZvcm1FcnJvci5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcbiAgICAgICAgZm9ybUVycm9yLnRleHRDb250ZW50ID0gaW5wdXRWYWxpZGF0aW9uTWVzc2FnZTtcbiAgICB9XG5cbiAgICBfaGlkZUVycm9yKGlucHV0KSB7XG4gICAgICAgIGNvbnN0IGZvcm1FcnJvciA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xuICAgICAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgICBmb3JtRXJyb3IudGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgZm9ybUVycm9yLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xuICAgIH1cblxuICAgIF90b2dnbGVCdXR0b24oc3VibWl0QnV0dG9uLCBmb3JtSW5wdXRMaXN0KSB7XG4gICAgICAgIGNvbnN0IGlzVmFsaWQgPSBmb3JtSW5wdXRMaXN0LmV2ZXJ5KChpbnB1dCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGlucHV0LnZhbGlkaXR5LnZhbGlkXG4gICAgICAgIH0pXG5cbiAgICAgICAgaWYgKCFpc1ZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlXG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlXG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpIHtcbiAgICAgICAgaWYgKCFpbnB1dC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgICAgICAgdGhpcy5fc2hvd0Vycm9yKGlucHV0LCBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2hpZGVFcnJvcihpbnB1dClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9mb3JtSW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2NvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XG5cbiAgICAgICAgdGhpcy5fZm9ybUlucHV0TGlzdC5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dClcbiAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b24odGhpcy5fc3VibWl0QnV0dG9uLCB0aGlzLl9mb3JtSW5wdXRMaXN0KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgICAgIHRoaXMuX2Zvcm1JbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hpZGVFcnJvcihpbnB1dClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uKHRoaXMuX3N1Ym1pdEJ1dHRvbiwgdGhpcy5fZm9ybUlucHV0TGlzdCk7XG4gICAgfVxuXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pXG5cbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0aW9uIiwiY2xhc3MgU2VjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoeyBkYXRhLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl9pbml0aWFsQXJyYXkgPSBkYXRhO1xuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICByZW5kZXJJdGVtcygpIHtcbiAgICAgICAgdGhpcy5faW5pdGlhbEFycmF5LmZvckVhY2goKGl0ZW0pID0+IHsgXG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBzZXRJdGVtKGVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uIiwiY2xhc3MgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGRlZmF1bHRCdXR0b25UZXh0KSB7XG4gICAgICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fZGVmYXVsdEJ1dHRvblRleHQgPSBkZWZhdWx0QnV0dG9uVGV4dDtcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3N1Ym1pdCcpO1xuICAgICAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfVxuXG4gICAgb3BlbigpIHtcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfaXNfb3BlbicpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB9XG5cblxuICAgIGNsb3NlKCkge1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICAgICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfaXNfb3BlbicpO1xuICAgIH1cblxuICAgIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfaGFuZGxlT3ZlcmxheUNsb3NlKGV2dCkge1xuICAgICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwJykpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldExvYWRpbmdCdXR0b24oKSB7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9ICdTYXZpbmcuLi4nO1xuICAgIH1cblxuICAgIHNldERlZmF1bHRCdXR0b24oKSB7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX2RlZmF1bHRCdXR0b25UZXh0O1xuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2xvc2UnKTtcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7IHRoaXMuY2xvc2UoKSB9KTtcblxuICAgICAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHsgdGhpcy5faGFuZGxlT3ZlcmxheUNsb3NlKGV2dCkgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cCIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJ1xuXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpXG4gICAgICAgXG4gICAgfVxuXG4gICAgb3BlbihuYW1lLCBsaW5rKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKS5zcmMgPSBsaW5rXG4gICAgICAgIHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2FwdGlvbicpLnRleHRDb250ZW50ID0gbmFtZVxuXG4gICAgICAgIHN1cGVyLm9wZW4oKVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2UiLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcydcblxuY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGRlZmF1bHRCdXR0b25UZXh0LCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3RvciwgZGVmYXVsdEJ1dHRvblRleHQpO1xuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIik7XG4gICAgfVxuXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcbiAgICB9XG5cbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuXG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpXG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnXG5cbmNsYXNzIFBvcHVwV2l0aENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGRlZmF1bHRCdXR0b25UZXh0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3RvciwgZGVmYXVsdEJ1dHRvblRleHQpXG4gIH1cblxuICBoYW5kbGVDb25maXJtQ2xpY2soY29uZmlybSkge1xuICAgIHRoaXMuX2NvbmZpcm0gPSBjb25maXJtO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fY29uZmlybSgpO1xuICAgIH0pXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoQ29uZmlybSIsImNsYXNzIFVzZXJJbmZvIHtcbiAgICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lU2VsZWN0b3IsIHVzZXJKb2JTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IgfSkge1xuICAgICAgICB0aGlzLl91c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWVTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX3VzZXJKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJKb2JTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2F2YXRhclNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCxcbiAgICAgICAgICAgIGpvYjogdGhpcy5fdXNlckpvYi50ZXh0Q29udGVudCxcbiAgICAgICAgICAgIGlkOiB0aGlzLl9pZFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0VXNlckluZm8obmV3VXNlcikge1xuICAgICAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IG5ld1VzZXIubmFtZTtcbiAgICAgICAgdGhpcy5fdXNlckpvYi50ZXh0Q29udGVudCA9IG5ld1VzZXIuYWJvdXQ7XG4gICAgICAgIHRoaXMuX2F2YXRhclNlbGVjdG9yLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHtuZXdVc2VyLmF2YXRhcn0pYDtcbiAgICAgICAgdGhpcy5faWQgPSBuZXdVc2VyLl9pZDtcbiAgICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgVXNlckluZm8iLCJjbGFzcyBBcGkge1xuICAgIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XG4gICAgICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmxcbiAgICAgICAgdGhpcy5oZWFkZXJzID0gaGVhZGVyc1xuICAgIH1cblxuICAgIGdldFVzZXJJbmZvKCkge1xuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5iYXNlVXJsICsgJy91c2Vycy9tZScsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVyc1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKSlcbiAgICB9XG5cbiAgICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuYmFzZVVybCArICcvdXNlcnMvbWUnLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgYWJvdXQgfSlcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCkpXG4gICAgfVxuXG4gICAgZ2V0Q2FyZHNMaXN0KCkge1xuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5iYXNlVXJsICsgJy9jYXJkcycsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVyc1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKSlcbiAgICB9XG5cbiAgICBhZGRDYXJkKHsgbmFtZSwgbGluayB9KSB7XG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLmJhc2VVcmwgKyAnL2NhcmRzJywge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZSwgbGluayB9KVxuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKSlcbiAgICB9XG5cbiAgICByZW1vdmVDYXJkKGNhcmRJRCkge1xuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5iYXNlVXJsICsgJy9jYXJkcy8nICsgYCR7Y2FyZElEfWAsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVyc1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHJlcy5vayA/IHJlcy5qc29uKCkgOiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKSlcbiAgICB9XG5cbiAgICBhZGRMaWtlKGNhcmRJRCkge1xuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5iYXNlVXJsICsgJy9jYXJkcy9saWtlcy8nICsgY2FyZElELCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnNcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiByZXMub2sgPyByZXMuanNvbigpIDogUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCkpXG4gICAgfVxuXG4gICAgZGVsZXRlTGlrZShjYXJkSUQpIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuYmFzZVVybCArICcvY2FyZHMvbGlrZXMvJyArIGNhcmRJRCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApKVxuICAgIH1cblxuICAgIHNldFVzZXJQaWMoeyBhdmF0YXIgfSkge1xuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5iYXNlVXJsICsgJy91c2Vycy9tZS9hdmF0YXInLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyIH0pXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gcmVzLm9rID8gcmVzLmpzb24oKSA6IFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApKVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBpIiwiY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICAgIHtcbiAgICAgICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcbiAgICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIlxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCJcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCJcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiXG4gICAgfVxuXTtcblxuY29uc3QgY29uZmlnID0ge1xuICAgIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fYnV0dG9uXCIsXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJwb3B1cF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gICAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gICAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiXG59O1xuXG5jb25zdCBvcGVuUHJvZmlsZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQnKTtcbmNvbnN0IG9wZW5DYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkJyk7XG5cbmNvbnN0IHByb2ZpbGVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jb250YWluZXJfdHlwZS1wcm9maWxlJyk7XG5jb25zdCBjYXJkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9hZGQtY2FyZCcpO1xuY29uc3QgYXZhdGFyRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9lZGl0LWF2YXRhcicpO1xuXG5jb25zdCBwb3B1cEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xuY29uc3QgcG9wdXBDYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jYXB0aW9uJyk7XG5cbmNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZS1uYW1lJyk7XG5jb25zdCBqb2JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfdHlwZS1hYm91dC1tZScpO1xuXG5jb25zdCBsaWtlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UnKTtcblxuY29uc3QgYXZhdGFyRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXItZWRpdCcpO1xuXG5leHBvcnQge1xuICAgIGluaXRpYWxDYXJkcywgb3BlblByb2ZpbGVNb2RhbCwgcHJvZmlsZUZvcm0sIHBvcHVwSW1hZ2UsIHBvcHVwQ2FwdGlvbiwgb3BlbkNhcmRNb2RhbCwgXG4gICAgY2FyZEZvcm0sIGNvbmZpZywgbmFtZUlucHV0LCBqb2JJbnB1dCwgbGlrZUJ1dHRvbiwgYXZhdGFyRWRpdEJ1dHRvbiwgYXZhdGFyRm9ybVxufSIsImltcG9ydCBcIi4vaW5kZXguY3NzXCJcbmltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcydcbmltcG9ydCBGb3JtVmFsaWRhdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0aW9uLmpzJ1xuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJ1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanMnXG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcydcbmltcG9ydCBBcGkgZnJvbSAnLi4vY29tcG9uZW50cy9BcGkuanMnXG5cbmltcG9ydCB7IG9wZW5Qcm9maWxlTW9kYWwsIHByb2ZpbGVGb3JtLCBvcGVuQ2FyZE1vZGFsLCBjYXJkRm9ybSwgY29uZmlnLCBuYW1lSW5wdXQsIGpvYklucHV0LCBhdmF0YXJFZGl0QnV0dG9uLCBhdmF0YXJGb3JtIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJ1xuXG5cbi8vIEFQSVxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gICAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEwXCIsXG4gICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiBcIjY0NDc1ODc5LTU4MjctNDViYS1iZTNmLTA0YTEzOTU2ODc2NFwiLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgIH1cbn0pO1xuXG4vLyBjbGFzc2VzXG5jb25zdCBlZGl0UHJvZmlsZVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdGlvbihjb25maWcsIHByb2ZpbGVGb3JtKTtcbmNvbnN0IGFkZENhcmRWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRpb24oY29uZmlnLCBjYXJkRm9ybSk7XG5jb25zdCBlZGl0QXZhdGFyVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0aW9uKGNvbmZpZywgYXZhdGFyRm9ybSk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHsgdXNlck5hbWVTZWxlY3RvcjogJy5wcm9maWxlX19uYW1lJywgdXNlckpvYlNlbGVjdG9yOiAnLnByb2ZpbGVfX3RpdGxlJywgYXZhdGFyU2VsZWN0b3I6ICcucHJvZmlsZV9fYXZhdGFyJyB9KTtcbmNvbnN0IGltYWdlUHJldmlldyA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX2ltYWdlLXByZXZpZXcnKTtcbmNvbnN0IGNvbmZpcm1EZWxldGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhDb25maXJtKCcucG9wdXBfY29uZmlybScsICdZZXMnKTtcblxuZWRpdFByb2ZpbGVWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuYWRkQ2FyZFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5lZGl0QXZhdGFyVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0Q2FyZHNMaXN0KCldKVxuICAgIC50aGVuKChbdXNlciwgY2FyZHNdKSA9PiB7XG4gICAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHVzZXIpO1xuXG4gICAgICAgIGNvbnN0IGNhcmRzTGlzdCA9IG5ldyBTZWN0aW9uKHtcbiAgICAgICAgICAgIGRhdGE6IGNhcmRzLFxuICAgICAgICAgICAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGRhdGEpO1xuICAgICAgICAgICAgICAgIGNhcmRzTGlzdC5zZXRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgICAgICcucGxhY2VzX19saXN0JylcblxuICAgICAgICBjYXJkc0xpc3QucmVuZGVySXRlbXMoKTtcblxuICAgICAgICAvLyBhZGQgbmV3IGNhcmRcbiAgICAgICAgY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICAgICAgICAgICAgcG9wdXBTZWxlY3RvcjogJy5wb3B1cF9hZGQtY2FyZCcsXG4gICAgICAgICAgICBkZWZhdWx0QnV0dG9uVGV4dDogJ0NyZWF0ZScsXG4gICAgICAgICAgICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICAgIGFkZENhcmRQb3B1cC5zZXRMb2FkaW5nQnV0dG9uKCk7XG4gICAgICAgICAgICAgICAgYXBpLmFkZENhcmQoZGF0YSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJkc0xpc3Quc2V0SXRlbShjYXJkRWxlbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBvcGVuQ2FyZE1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgYWRkQ2FyZFBvcHVwLm9wZW4oKTtcbiAgICAgICAgICAgIGFkZENhcmRQb3B1cC5zZXREZWZhdWx0QnV0dG9uKCk7XG4gICAgICAgICAgICBhZGRDYXJkVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICAgICAgICB9KTtcbiAgICB9KVxuXG5jb25zdCBlZGl0UHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gICAge1xuICAgICAgICBwb3B1cFNlbGVjdG9yOiAnLnBvcHVwX3Byb2ZpbGUnLFxuICAgICAgICBkZWZhdWx0QnV0dG9uVGV4dDogJ1NhdmUnLFxuICAgICAgICBoYW5kbGVGb3JtU3VibWl0OiAoaW5mbykgPT4ge1xuICAgICAgICAgICAgZWRpdFByb2ZpbGVQb3B1cC5zZXRMb2FkaW5nQnV0dG9uKCk7XG4gICAgICAgICAgICBhcGkuc2V0VXNlckluZm8oeyBuYW1lOiBpbmZvWyd1c2VyLW5hbWUnXSwgYWJvdXQ6IGluZm9bJ3VzZXItYWJvdXQnXSB9KVxuICAgICAgICAgICAgICAgIC50aGVuKGluZm8gPT4ge1xuICAgICAgICAgICAgICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhpbmZvKTtcbiAgICAgICAgICAgICAgICAgICAgZWRpdFByb2ZpbGVQb3B1cC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG5jb25zdCBlZGl0QXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gICAge1xuICAgICAgICBwb3B1cFNlbGVjdG9yOiAnLnBvcHVwX2VkaXQtYXZhdGFyJyxcbiAgICAgICAgZGVmYXVsdEJ1dHRvblRleHQ6ICdTYXZlJyxcbiAgICAgICAgaGFuZGxlRm9ybVN1Ym1pdDogKGluZm8pID0+IHtcbiAgICAgICAgICAgIGVkaXRBdmF0YXIuc2V0TG9hZGluZ0J1dHRvbigpO1xuICAgICAgICAgICAgYXBpLnNldFVzZXJQaWMoeyBhdmF0YXI6IGluZm9bJ2F2YXRhci1saW5rJ10gfSlcbiAgICAgICAgICAgICAgICAudGhlbihpbmZvID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oaW5mbyk7XG4gICAgICAgICAgICAgICAgICAgIGVkaXRBdmF0YXIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4pXG5cbi8vIGNhcmQgaXRlbXNcbmNvbnN0IGhhbmRsZUNhcmRDbGljayA9IChuYW1lLCBsaW5rKSA9PiB7XG4gICAgaW1hZ2VQcmV2aWV3Lm9wZW4obmFtZSwgbGluayk7XG59XG5cbmNvbnN0IGNyZWF0ZUNhcmQgPSAoZGF0YSkgPT4ge1xuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICAgICAgZGF0YSxcbiAgICAgICAgZGF0YS5faWQsXG4gICAgICAgIGRhdGEubGlrZXMsXG4gICAgICAgIGRhdGEub3duZXIuX2lkID09PSB1c2VySW5mby5faWQsXG4gICAgICAgIGRhdGEubGlrZXMuc29tZSgoaXRlbSkgPT4geyByZXR1cm4gaXRlbS5faWQgPT09IHVzZXJJbmZvLl9pZCB9KSxcbiAgICAgICAgJyNjYXJkLXRlbXBsYXRlJyxcbiAgICAgICAgaGFuZGxlQ2FyZENsaWNrLFxuICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoY2FyZC5fbGlrZWRCeU93bmVyKSB7XG4gICAgICAgICAgICAgICAgYXBpLmRlbGV0ZUxpa2UoZGF0YS5faWQpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcmQuc2V0TGlrZXMocmVzLmxpa2VzKVxuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZC5saWtlQnV0dG9uVG9nZ2xlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjYXJkLl9saWtlZEJ5T3duZXIgPSBmYWxzZTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhcGkuYWRkTGlrZShkYXRhLl9pZClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZC5zZXRMaWtlcyhyZXMubGlrZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZC5saWtlQnV0dG9uVG9nZ2xlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjYXJkLl9saWtlZEJ5T3duZXIgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0sXG4gICAgICAgICgpID0+IHtcbiAgICAgICAgICAgIGNvbmZpcm1EZWxldGVQb3B1cC5zZXREZWZhdWx0QnV0dG9uKCk7XG4gICAgICAgICAgICBjb25maXJtRGVsZXRlUG9wdXAub3BlbigpO1xuICAgICAgICAgICAgY29uZmlybURlbGV0ZVBvcHVwLmhhbmRsZUNvbmZpcm1DbGljaygoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uZmlybURlbGV0ZVBvcHVwLnNldExvYWRpbmdCdXR0b24oKTtcbiAgICAgICAgICAgICAgICBhcGkucmVtb3ZlQ2FyZChkYXRhLl9pZClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzID0+IGNhcmQuZGVsZXRlQ2FyZCgpKVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBjb25maXJtRGVsZXRlUG9wdXAuY2xvc2UoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgKVxuXG4gICAgY29uc3QgY2FyZEl0ZW0gPSBjYXJkLmNyZWF0ZUNhcmRFbGVtZW50KCk7XG4gICAgcmV0dXJuIGNhcmRJdGVtO1xufVxuXG4vLyBldmVudCBsaXN0ZW5lcnNcblxub3BlblByb2ZpbGVNb2RhbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjb25zdCB7IG5hbWUsIGpvYiB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgICBuYW1lSW5wdXQudmFsdWUgPSBuYW1lO1xuICAgIGpvYklucHV0LnZhbHVlID0gam9iO1xuICAgIGVkaXRQcm9maWxlUG9wdXAub3BlbigpO1xuICAgIGVkaXRQcm9maWxlUG9wdXAuc2V0RGVmYXVsdEJ1dHRvbigpO1xuICAgIGVkaXRQcm9maWxlVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xufSk7XG5cbmF2YXRhckVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgZWRpdEF2YXRhci5zZXREZWZhdWx0QnV0dG9uKCk7XG4gICAgZWRpdEF2YXRhclZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgICBlZGl0QXZhdGFyLm9wZW4oKTtcbn0pXG5cbiJdLCJzb3VyY2VSb290IjoiIn0=